@{
	var Present = ViewBag.Present ?? 0;
	var Late = ViewBag.Late ?? 0;
	var Absent = ViewBag.Absent ?? 0;
}

<div class="col-xl-5 d-flex">
	<div class="card flex-fill">
		<div class="card-header">
			<div class="d-flex align-items-center justify-content-between flex-wrap row-gap-2">
				<h5>Leave Details</h5>
				<div class="dropdown">
					<a href="javascript:void(0);" class="btn btn-white border btn-sm d-inline-flex align-items-center" data-bs-toggle="dropdown">
						<i class="ti ti-calendar me-1"></i>2024
					</a>

				</div>
			</div>
		</div>
		<div class="card-body">
			<div class="row align-items-center">
				<div class="col-md-6">
					<div class="mb-3">
						<div class="mb-3">
							<p class="d-flex align-items-center">
								<i class="ti ti-circle-filled fs-8 text-dark me-1"></i>
								<span class="text-gray-9 fw-semibold me-1">@Present</span>
								on time
							</p>
						</div>
						<div class="mb-3">
							<p class="d-flex align-items-center">
								<i class="ti ti-circle-filled fs-8 text-success me-1"></i>
								<span class="text-gray-9 fw-semibold me-1">@Late</span>
								Late Attendance
							</p>
						</div>
						<div class="mb-3">
							<p class="d-flex align-items-center">
								<i class="ti ti-circle-filled fs-8 text-danger me-1"></i>
								<span class="text-gray-9 fw-semibold me-1">@Absent</span>
								Absent
							</p>
						</div>
						<div>
							<p class="d-flex align-items-center">
								<i class="ti ti-circle-filled fs-8 text-warning me-1"></i>
								<span class="text-gray-9 fw-semibold me-1">68</span>
								Sick Leave
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="mb-3 d-flex justify-content-md-end">
						<div>
							<canvas id="leaves_chart" width="300" height="300"></canvas>
						</div>
					</div>
				</div>
				<div class="col-md-12">
					<div class="form-check mt-2">
						<input class="form-check-input" type="checkbox" id="todo1">
						<label class="form-check-label" for="todo1">Better than  <span class="text-gray-9">85%</span> of Employees</label>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts {
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

	<script>
		// Get the dynamic values from ViewBag
		var present = @Present;
		var late = @Late;
		var absent = @Absent;
		var ontime = @Present;

		// Prepare the chart data
		var chartData = {
			labels: ['Present', 'Late', 'Absent', 'On Time'],
			datasets: [{
				data: [present, late, absent,ontime],
				backgroundColor: ['#4CAF50', '#FF9800', '#F44336','#003366'],
				borderColor: ['#4CAF50', '#FF9800', '#F44336','#003366'],
				borderWidth: 1,

			}]
		};

		// Chart options
		var chartOptions = {
			responsive: true,
			cutoutPercentage: 70,  // Makes the chart a donut
			plugins: {
				legend: {
					display: false,
					position: 'top'
				},
				tooltip: {
					callbacks: {
						label: function(tooltipItem) {
							return tooltipItem.label + ": " + tooltipItem.raw;
						}
					}
				}
			}
		};

		// Render the chart
		var ctx = document.getElementById('leaves_chart').getContext('2d');
		var myChart = new Chart(ctx, {
			type: 'doughnut', // Donut chart type
			data: chartData,
			options: chartOptions
		});
	</script>
}		