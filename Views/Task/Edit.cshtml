@model Tasks

@{
    var assignedUserIds = ViewBag.AssignedUserIds as List<int>;
    var allUsers = ViewBag.AllUsers as List<User>;
}


<div class="card p-4">
    <form asp-action="Edit" asp-controller="Task" method="post" enctype="multipart/form-data">
        <h2 class="text-start mb-4">Edit Task</h2>
        <div class="mb-3">
            <input class="form-control" type="hidden" name="taskId" value="@Model.TaskId" />
        </div>

        <div class="mb-3">

            <label class="form-label">Task Title</label>
            <input class="form-control" type="text" name="Title" value="@Model.Title" required />
        </div>

        <div class="mb-3">
            <label class="form-label">Task Description</label>
            <textarea class="form-control" name="Description">@Model.Description</textarea>

        </div>

        <div class="mb-3">
            <label class="form-label">Deadline</label>
            <input class="form-control" type="date" name="Deadline" value="@Model.Deadline.ToString("yyyy-MM-dd")" />
        </div>

        <div class="mb-3">
            <label class="form-label">Priority</label>
            <select class="form-control" name="Priority">
                <option value="Low" selected="@(Model.Priority == "Low" ? "selected" : null)">Low</option>
                <option value="Medium" selected="@(Model.Priority == "Medium" ? "selected" : null)">Medium</option>
                <option value="High" selected="@(Model.Priority == "High" ? "selected" : null)">High</option>
            </select>
        </div>
        @*  <div class="mb-3">
        <label class="form-label">Assigned Users</label>
        <select class="form-control" name="AssignedUserIds" multiple>
        @foreach (var user in ViewBag.AllUsers)
        {
        <option value="@user.UserId" selected="@(ViewBag.AssignedUserIds.Contains(user.UserId) ? "selected" : null)">
        @user.FirstName @user.LastName
        </option>
        }
        </select>
        </div> *@
        <div class="col-md-6">
            <div class="mb-3">
                <label class="form-label">Team Members</label>
                <div class="dropdown">
                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                        Select Team Members
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        @foreach (var member in ViewBag.AllUsers)
                        {
                            <li>
                                <input type="checkbox" class="form-check-input" name="AssignedUserIds" value="@member.UserId" id="member_@member.UserId">
                                <label class="form-check-label" for="member_@member.UserId">@member.FullName</label>
                            </li>
                        }
                    </ul>
                </div>
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">Upload File</label>
            <input class="form-control" type="file" name="file" />
        </div>

        <div class="d-flex justify-content-end mt-4">
            <button class="btn btn-primary btn-lg" type="submit">Save</button>
        </div>
    </form>
</div>
