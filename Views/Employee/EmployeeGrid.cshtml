@* @model IEnumerable<Pulse360.Models.User> *@

<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
	<meta name="description" content="Smarthr - Bootstrap Admin Template">
	<meta name="keywords" content="admin, estimates, bootstrap, business, html5, responsive, Projects">
	<meta name="author" content="Dreams technologies - Bootstrap Admin Template">
	<meta name="robots" content="noindex, nofollow">
	<title>Smarthr Admin Template</title>

	<!-- Favicon -->
	<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.png">

	<!-- Apple Touch Icon -->
	<link rel="apple-touch-icon" sizes="180x180" href="assets/img/apple-touch-icon.png">

	<!-- Theme Script js -->
	<script src="assets/js/theme-script.js"></script>

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css">

	<!-- Feather CSS -->
	<link rel="stylesheet" href="assets/plugins/icons/feather/feather.css">

	<!-- Tabler Icon CSS -->
	<link rel="stylesheet" href="assets/plugins/tabler-icons/tabler-icons.css">

	<!-- Select2 CSS -->
	<link rel="stylesheet" href="assets/plugins/select2/css/select2.min.css">

	<!-- Fontawesome CSS -->
	<link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">

	<!-- Color Picker Css -->
	<link rel="stylesheet" href="assets/plugins/flatpickr/flatpickr.min.css">
	@* <link rel="stylesheet" href="assets/plugins/@simonwep/pickr/themes/nano.min.css"> *@

	<!-- Daterangepikcer CSS -->
	<link rel="stylesheet" href="assets/plugins/daterangepicker/daterangepicker.css">

	<!-- Datatable CSS -->
	<link rel="stylesheet" href="assets/css/dataTables.bootstrap5.min.css">

	<!-- Datetimepicker CSS -->
	<link rel="stylesheet" href="assets/css/bootstrap-datetimepicker.min.css">

	<!-- Select2 CSS -->
	<link rel="stylesheet" href="assets/plugins/select2/css/select2.min.css">

	<!-- Bootstrap Tagsinput CSS -->
	<link rel="stylesheet" href="assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css">

	<!-- Main CSS -->
	<link rel="stylesheet" href="assets/css/style.css">

</head>

<body>

	<div id="global-loader" style="display: none;">
		<div class="page-loader"></div>
	</div>

	<!-- Main Wrapper -->
	<div class="main-wrapper">



		<div class="content">

			<!-- Breadcrumb -->
			<div class="d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-3">
				<div class="my-auto mb-2">
					<h2 class="mb-1">Employee</h2>
					<nav>
						<ol class="breadcrumb mb-0">
							<li class="breadcrumb-item">
								<a href="index.html"><i class="ti ti-smart-home"></i></a>
							</li>
							<li class="breadcrumb-item">
								Employee
							</li>
							<li class="breadcrumb-item active" aria-current="page">Employee Grid</li>
						</ol>
					</nav>
				</div>
				<div class="d-flex my-xl-auto right-content align-items-center flex-wrap ">
					<div class="me-2 mb-2">
						<div class="d-flex align-items-center border bg-white rounded p-1 me-2 icon-list">
							<a asp-controller="Employee" asp-action="EmpList" class="btn btn-icon btn-sm active bg-primary text-white me-1"><i class="ti ti-list-tree"></i></a>
							<a asp-controller="Employee" asp-action="EmployeeGrid" class="btn btn-icon btn-sm"><i class="ti ti-layout-grid"></i></a>
						</div>
					</div>
					<div class="me-2 mb-2">
						@* <div id="" class="dropdown">
							<a href="javascript:void(0);" class="dropdown-toggle btn btn-white d-inline-flex align-items-center" data-bs-toggle="dropdown">
								<i class="ti ti-file-export me-1"></i>Export
							</a>
							<ul class="dropdown-menu  dropdown-menu-end p-3">
								<li>
									<a id="exportToPDF" href="javascript:void(0);" class="dropdown-item rounded-1"><i class="ti ti-file-type-pdf me-1"></i>Export as PDF</a>
								</li>
								<li>
									<a id="exportToExcel" href="javascript:void(0);" class="dropdown-item rounded-1"><i class="ti ti-file-type-xls me-1"></i>Export as Excel </a>
								</li>
							</ul>
						</div> *@

						<div id="" class="dropdown">
							<a href="javascript:void(0);" class="dropdown-toggle btn btn-white d-inline-flex align-items-center" data-bs-toggle="dropdown">
								<i class="ti ti-file-export me-1"></i>Export
							</a>
							<ul class="dropdown-menu  dropdown-menu-end p-3">
								<li>
									<a id="exportToPDF" @* asp-controller="Employee" asp-action="ExportToPdf" *@ href="@Url.Action("ExportToPdf", "Employee")" class="dropdown-item rounded-1"><i class="ti ti-file-type-pdf me-1"></i>Export as PDF</a>
								</li>
								<li>
									<a id="exportToExcel" @* href="javascript:void(0);" *@href="@Url.Action("ExportToExcel", "Employee")" class="dropdown-item rounded-1"><i class="ti ti-file-type-xls me-1"></i>Export as Excel </a>
								</li>
							</ul>
						</div>
					</div>
					<div class="mb-2">
						<a href="#" id="openmod" class="btn btn-primary d-flex align-items-center"><i class="ti ti-circle-plus me-2"></i>Add Employee</a>
					</div>
					<div class="head-icons ms-2">
						<a href="javascript:void(0);" class="" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-original-title="Collapse" id="collapse-header">
							<i class="ti ti-chevrons-up"></i>
						</a>
					</div>
				</div>
			</div>
			<!-- /Breadcrumb -->

			<div class="row">

				<!-- Total Plans -->
				<div class="col-lg-3 col-md-6 d-flex">
					<div class="card flex-fill">
						<div class="card-body d-flex align-items-center justify-content-between">
							<div class="d-flex align-items-center overflow-hidden">
								<div>
									<span class="avatar avatar-lg bg-dark rounded-circle"><i class="ti ti-users"></i></span>
								</div>
								<div class="ms-2 overflow-hidden">
									<p class="fs-12 fw-medium mb-1 text-truncate">Total Employee</p>
									<h4>@ViewBag.TotalMemberCount</h4>
								</div>
							</div>
							@* <div>
							<span class="badge badge-soft-purple badge-sm fw-normal">
							<i class="ti ti-arrow-wave-right-down"></i>
							+19.01%
							</span>
							</div> *@
						</div>
					</div>
				</div>
				<!-- /Total Plans -->
				<!-- Total Plans -->
				<div class="col-lg-3 col-md-6 d-flex">
					<div class="card flex-fill">
						<div class="card-body d-flex align-items-center justify-content-between">
							<div class="d-flex align-items-center overflow-hidden">
								<div>
									<span class="avatar avatar-lg bg-success rounded-circle"><i class="ti ti-user-share"></i></span>
								</div>
								<div class="ms-2 overflow-hidden">
									<p class="fs-12 fw-medium mb-1 text-truncate">Active</p>
									<h4>@ViewBag.ActiveMemberCount</h4>
								</div>
							</div>
							@* <div>
							<span class="badge badge-soft-primary badge-sm fw-normal">
							<i class="ti ti-arrow-wave-right-down"></i>
							+19.01%
							</span>
							</div> *@
						</div>
					</div>
				</div>
				<!-- /Total Plans -->
				<!-- Inactive Plans -->
				<div class="col-lg-3 col-md-6 d-flex">
					<div class="card flex-fill">
						<div class="card-body d-flex align-items-center justify-content-between">
							<div class="d-flex align-items-center overflow-hidden">
								<div>
									<span class="avatar avatar-lg bg-danger rounded-circle"><i class="ti ti-user-pause"></i></span>
								</div>
								<div class="ms-2 overflow-hidden">
									<p class="fs-12 fw-medium mb-1 text-truncate">InActive</p>
									<h4>@ViewBag.InactiveMemberCount</h4>
								</div>
							</div>
							@* <div>
							<span class="badge badge-soft-dark badge-sm fw-normal">
							<i class="ti ti-arrow-wave-right-down"></i>
							+19.01%
							</span>
							</div> *@
						</div>
					</div>
				</div>
				<!-- /Inactive Companies -->
				<!-- No of Plans  -->
				<div class="col-lg-3 col-md-6 d-flex">
					<div class="card flex-fill">
						<div class="card-body d-flex align-items-center justify-content-between">
							<div class="d-flex align-items-center overflow-hidden">
								<div>
									<span class="avatar avatar-lg bg-info rounded-circle"><i class="ti ti-user-plus"></i></span>
								</div>
								<div class="ms-2 overflow-hidden">
									<p class="fs-12 fw-medium mb-1 text-truncate">New Joiners</p>
									<h4>@ViewBag.RecentlyAddedCount</h4>
								</div>
							</div>
							@* <div>
							<span class="badge badge-soft-secondary badge-sm fw-normal">
							<i class="ti ti-arrow-wave-right-down"></i>
							+19.01%
							</span>
							</div> *@
						</div>
					</div>
				</div>
				<!-- /No of Plans -->

			</div>
			<div class="card">
				<div class="card-header d-flex align-items-center justify-content-between flex-wrap row-gap-3">
					<h5>Employee List</h5>
					<div class="d-flex my-xl-auto right-content align-items-center flex-wrap row-gap-3">

						<div class="dropdown me-3">
							<select id="designationFilter" class="form-control">
								<option value="0">Select Designation</option>
								@foreach (var designation in ViewBag.Designation)
								{
									<option value="@designation.Value">@designation.Text</option>
								}
							</select>
						</div>




						<div class="dropdown">

							@* <select id="optgrid" class="form-control">
							<option value="">Sorting By</option>
							<option value="asc">Ascending</option>
							<option value="desc">Descending</option>
							<option value="last7days">Last 7 Days</option>
							<option value="thismonth">This Month</option>
							<option value="thisyear">This Year</option>
							</select> *@
							<select id="optgrid" class="form-control">
								<option value="">Sorting By</option>
								<option value="asc">Ascending (Name)</option>
								<option value="desc">Descending (Name)</option>
								<option value="productivityasc">Ascending (Productivity)</option>
								<option value="productivitydesc">Descending (Productivity)</option>
								<option value="last7days">Last 7 Days</option>
								<option value="thismonth">This Month</option>
								<option value="thisyear">This Year</option>
							</select>

						</div>


					</div>
				</div>
			</div>

			<!-- Clients Grid -->
			<div class="row employee-grid-container">
				@if (Model != null)
				{
					@foreach (var user in Model)
					{
						@* <div class="col-xl-4 col-lg-4 col-md-6 mb-4"> *@

						<div class="col-xl-4 col-lg-4 col-md-6 mb-4 employee-card" data-designation="@user.DesignationId">

							<div class="card shadow-sm">
								<div class="card-body">
									<div class="d-flex justify-content-between align-items-start mb-2">
										<div class="form-check form-check-md">
											<input class="form-check-input" type="checkbox">
										</div>
										<div>
											<a href="employee-details.html" class="avatar avatar-xl avatar-rounded online border p-1 border-primary rounded-circle">
												<img src="/@Url.Content(user.ProfilePicture)" class="img-fluid h-auto w-auto" alt="Profile Picture">
											</a>
										</div>
										<div class="dropdown">
										</div>
									</div>

									<div class="text-center mb-3">
										<h6 class="mb-1">@user.FirstName @user.LastName</h6>
										<span class="mb-3">@user.DesignationName</span>
									</div>

									<div class="row text-center">
										<div class="col-4">
											<div class="mb-3">
												<span class="fs-12">Projects</span>
												<h6 class="fw-medium">@user.TotalProjects</h6>
											</div>
										</div>
										<div class="col-4">
											<div class="mb-3">
												<span class="fs-12">Done</span>
												<h6 class="fw-medium">@user.CompletedTasks</h6>
											</div>
										</div>
										<div class="col-4">
											<div class="mb-3">
												<span class="fs-12">Progress</span>
												<h6 class="fw-medium">@user.InProgressTasks</h6>
											</div>
										</div>
									</div>

									<p class="mb-2 text-center">Productivity: <span class="text-purple">@user.Productivity%</span></p>
									<div class="progress progress-xs mb-2">
										<div class="progress-bar bg-purple" role="progressbar" style="width: @user.Productivity%"></div>
									</div>
								</div>
							</div>
						</div>

					}
				}
				else
				{
					<div class="col-12 text-center">
						<p>No data available.</p>
					</div>
				}

			</div>
			<!-- /Clients Grid -->

		</div>
		<div class="footer d-sm-flex align-items-center justify-content-between border-top bg-white p-3">
			<p class="mb-0">2014 - 2025 &copy; SmartHR.</p>
			<p>Designed &amp; Developed By <a href="javascript:void(0);" class="text-primary">Dreams</a></p>
		</div>
		<!-- /Page Wrapper -->
		<!-- Add Employee -->
		<!-- Add Employee -->
		<div class="modal fade" id="exampleModal">
			<div class="modal-dialog modal-dialog-centered modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<div class="d-flex align-items-center">
							<h4 class="modal-title me-2">Add New Employee</h4>
						</div>
						<button type="button" class="btn-close custom-btn-close" data-bs-dismiss="modal" aria-label="Close">
							<i class="ti ti-x"></i>
						</button>
					</div>
					<form method="post" id="myempform" enctype="multipart/form-data">
						<div class="contact-grids-tab">
							<ul class="nav nav-underline" id="myTab" role="tablist">
								<li class="nav-item" role="presentation">
									<button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#basic-info" type="button" role="tab" aria-selected="true">Basic Information</button>
								</li>
							</ul>
						</div>
						<div class="tab-content" id="myTabContent">
							<div class="tab-pane fade show active" id="basic-info" role="tabpanel" aria-labelledby="info-tab" tabindex="0">
								<div class="modal-body pb-0 ">
									<div class="row">
										<div class="col-md-12">
											<div class="d-flex align-items-center flex-wrap row-gap-3 bg-light w-100 rounded p-3 mb-4">
												<div class="d-flex align-items-center justify-content-center avatar avatar-xxl rounded-circle border border-dashed me-2 flex-shrink-0 text-dark frames">
													<i class="ti ti-photo text-gray-2 fs-16"></i>
												</div>
												<div class="profile-upload">
													<div class="mb-2">
														<h6 class="mb-1">Upload Profile Image</h6>
														<p class="fs-12">Image should be below 4 mb</p>
													</div>
													<div class="profile-uploader d-flex align-items-center">
														<div class="drag-upload-btn btn btn-sm btn-primary me-2">
															Upload
															<input type="file" class="form-control image-sign" id="ProfilePicture" name="ProfilePicture" accept="image/*">
														</div>
														<a href="javascript:void(0);" class="btn btn-light btn-sm">Cancel</a>
													</div>

												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">First Name <span class="text-danger"> *</span></label>
												<input type="text" name="FirstName" class="form-control" required>
											</div>
										</div>
										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Last Name</label>
												<input type="text" name="LastName" class="form-control" required>
											</div>
										</div>
										@* <div class="col-md-6">
										<div class="mb-3">
										<label class="form-label">Employee ID (Remove Karaych ahe) <span class="text-danger"> *</span></label>
										<input type="text" class="form-control">
										</div>
										</div>  *@

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Email <span class="text-danger"> *</span></label>
												<input type="email" name="Email" class="form-control" required>
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3 ">
												<label class="form-label">Password <span class="text-danger"> *</span></label>
												<div class="pass-group">
													<input type="password" name="PasswordHash" class="pass-input form-control" required>
													<span class="ti toggle-password ti-eye-off"></span>
												</div>
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Joining Date <span class="text-danger"> *</span></label>
												<div class="input-icon-end position-relative">
													<input type="text" class="form-control datetimepicker" name="DateOfJoining" placeholder="dd/mm/yyyy" required>
													<span class="input-icon-addon">
														<i class="ti ti-calendar text-gray-7"></i>
													</span>
												</div>
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Birth Date <span class="text-danger"> *</span></label>
												<div class="input-icon-end position-relative">
													<input type="text" class="form-control datetimepicker" name="DateOfBirth" placeholder="dd/mm/yyyy" required>
													<span class="input-icon-addon">
														<i class="ti ti-calendar text-gray-7"></i>
													</span>
												</div>
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Role</label>
												<select name="RoleId" class="form-control" id="roleDropdown" required>
													<option value="">-- Select Role --</option>
													@foreach (var role in ViewBag.Roles)
													{
														<option value="@role.Value">@role.Text</option>
													}
												</select>
												<div class="error-msg text-danger" style="display:none;"></div>
											</div>
										</div>

										<div class="col-md-6" id="departmentContainer">
											<div class="mb-3">
												<label class="form-label">Department</label>
												<select name="DepartmentId" class="form-control" id="departmentDropdown" required>
													<option value="">-- Select Department --</option>
													@foreach (var department in ViewBag.Departments)
													{
														<option value="@department.Value">@department.Text</option>
													}
												</select>
												<div class="error-msg text-danger" style="display:none;"></div>
											</div>
										</div>

										<div class="col-md-6" id="managerContainer">
											<div class="mb-3">
												<label class="form-label">Manager</label>
												<select name="ReportingManager" id="managerDropdown" class="form-control" disabled>
													<option value="">-- Select Manager --</option>
													@if (ViewBag.Managers != null)
													{
														foreach (var manager in ViewBag.Managers)
														{
															<option value="@manager.Value" data-department-id="@manager.DepartmentId">@manager.Text</option>
														}
													}
												</select>
												<div class="error-msg text-danger" style="display:none;"></div>
											</div>
										</div>

										@* <div class="col-md-6" id="managerContainer" style="display: none;">
										<div class="mb-3">
										<label class="form-label">Select Manager</label>
										<select name="ReportingManager" class="form-control" id="managerDropdown" disabled>
										<option value="">-- Select Manager --</option>
										@if (ViewBag.Managers != null)
										{
										foreach (var manager in ViewBag.Managers)
										{
										<option value="@manager.Value" data-department-id="@manager.DepartmentId">@manager.Text</option>
										}
										}
										</select>
										<input type="hidden" name="ReportingManagerName" id="ReportingManagerName" />
										</div>
										</div> *@



										<div class="col-md-6" id="designationContainer">
											<div class="mb-3">
												<label class="form-label">Designation</label>
												<select name="DesignationtId" id="designtionDropdown" class="form-control" required>
													<option value="">-- Select Designation --</option>
													@foreach (var designation in ViewBag.Designations)
													{
														<option value="@designation.Value">@designation.Text</option>
													}
												</select>
												<div class="error-msg text-danger" style="display:none;"></div>
											</div>
										</div>

										@* <div class="col-md-6">
										<div class="mb-3">
										<label class="form-label">Username (Remove Karaych Ahe)<span class="text-danger"> *</span></label>
										<input type="text" class="form-control">
										</div>
										</div> *@


										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Phone Number <span class="text-danger"> *</span></label>
												<input type="text" name="PhoneNumber" class="form-control" required>
											</div>
										</div>
										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Address<span class="text-danger"> *</span></label>
												<input type="text" name="Address" class="form-control" required>
											</div>
										</div>


										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Gender</label>
												<select class="form-control" name="Gender" required>
													<option value="" disabled selected hidden>Select</option>
													<option value="Male">Male</option>
													<option value="Female">Female</option>
												</select>
												<div class="error-msg text-danger" style="display:none;"></div>
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Status</label>
												<select class="form-control" name="Status" required>
													<option value="" disabled selected hidden>Select</option>
													<option value="Active">Active</option>
													<option value="Inactive">Inactive</option>
												</select>
												<div class="error-msg text-danger" style="display:none;"></div>
											</div>
										</div>
										<div class="col-md-12">
											<div class="mb-3">
												<label class="form-label">About <span class="text-danger"> *</span></label>
												<textarea name="AboutEmployee" class="form-control" rows="3" required></textarea>
											</div>
										</div>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-outline-light border me-2" data-bs-dismiss="modal">Cancel</button>
									<button type="button" class="btn btn-primary" id="savebtn1">Save </button>
								</div>
							</div>

						</div>
					</form>
				</div>
			</div>
		</div>
		<!-- /Add Employee -->
		<!-- Edit Employee -->
		<div class="modal fade" id="editModal">
			<div class="modal-dialog modal-dialog-centered modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<div class="d-flex align-items-center">
							<h4 class="modal-title me-2">Edit Employee</h4><span>Employee  ID : EMP -0024</span>
						</div>
						<button type="button" class="btn-close custom-btn-close" data-bs-dismiss="modal" aria-label="Close">
							<i class="ti ti-x"></i>
						</button>
					</div>
					<form method="post" id="editForm" enctype="multipart/form-data">
						<div class="contact-grids-tab">
							<ul class="nav nav-underline" id="myTab2" role="tablist">
								<li class="nav-item" role="presentation">
									<button class="nav-link active" id="info-tab2" data-bs-toggle="tab" data-bs-target="#basic-info2" type="button" role="tab" aria-selected="true">Basic Information</button>
								</li>

							</ul>
						</div>
						<div class="tab-content" id="myTabContent2">
							<div class="tab-pane fade show active" id="basic-info2" role="tabpanel" aria-labelledby="info-tab2" tabindex="0">
								<div class="modal-body pb-0 ">
									<div class="row">
										<input type="hidden" id="editUserId" name="UserId" />

										<div class="col-md-12">
											<div class="d-flex align-items-center flex-wrap row-gap-3 bg-light w-100 rounded p-3 mb-4">
												<div class="d-flex align-items-center justify-content-center avatar avatar-xxl rounded-circle border border-dashed me-2 flex-shrink-0 text-dark frames">
													<img src="assets/img/users/user-13.jpg" alt="img" class="rounded-circle">
												</div>
												<div class="profile-upload">
													<div class="mb-2">
														<h6 class="mb-1">Upload Profile Image</h6>
														<p class="fs-12">Image should be below 4 mb</p>
													</div>
													<div class="profile-uploader d-flex align-items-center">
														<div class="drag-upload-btn btn btn-sm btn-primary me-2">
															Upload
															<input type="file" id="editProfilePicturePreview" name="ProfilePicture" class="form-control image-sign" multiple="">
														</div>
														<a href="javascript:void(0);" class="btn btn-light btn-sm">Cancel</a>
													</div>

												</div>
											</div>
										</div>
										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">First Name <span class="text-danger"> *</span></label>
												<input type="text" id="editFirstName" name="FirstName" class="form-control">
											</div>
										</div>
										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Last Name</label>
												<input type="text" id="editLastName" name="LastName" class="form-control">
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Email <span class="text-danger"> *</span></label>
												<input type="email" id="editEmail" name="Email" class="form-control">
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3 ">
												<label class="form-label">Password <span class="text-danger"> *</span></label>
												<div class="pass-group">
													<input type="password" id="editPasswordHash" name="PasswordHash" class="pass-input form-control">
													<span class="ti toggle-password ti-eye-off"></span>
												</div>
											</div>
										</div>


										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Joining Date <span class="text-danger"> *</span></label>
												<div class="input-icon-end position-relative">
													<input type="text" id="editDateOfJoining" name="DateOfJoining" class="form-control datetimepicker">
													<span class="input-icon-addon">
														<i class="ti ti-calendar text-gray-7"></i>
													</span>
												</div>
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Birth Date <span class="text-danger"> *</span></label>
												<div class="input-icon-end position-relative">
													<input type="text" id="editDateOfBirth" name="DateOfBirth" class="form-control datetimepicker">
													<span class="input-icon-addon">
														<i class="ti ti-calendar text-gray-7"></i>
													</span>
												</div>
											</div>
										</div>


										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Role</label>
												<select id="roleDropdown" name="RoleId" class="form-control">
													<option value="">-- Select Role --</option>
													@foreach (var role in ViewBag.Roles)
													{
														<option value="@role.Value">@role.Text</option>
													}
												</select>
											</div>
										</div>


										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Department</label>
												<select id="departmentDropdown" name="DepartmentId" class="form-control">
													<option value="">-- Select Department --</option>
													@foreach (var department in ViewBag.Departments)
													{
														<option value="@department.Value">@department.Text</option>
													}
												</select>
											</div>
										</div>

										<div class="col-md-6" id="managerContainer">
											<div class="mb-3">
												<label class="form-label">Manager</label>
												<select name="ReportingManager" class="form-control" id="managerDropdown" disabled>
													<option value="">-- Select Manager --</option>
													@if (ViewBag.Managers != null)
													{
														foreach (var manager in ViewBag.Managers)
														{
															<option value="@manager.Value" data-department-id="@manager.DepartmentId">@manager.Text</option>
														}
													}
												</select>

												<input type="hidden" name="ReportingManager" id="managerDropdown" />
											</div>
										</div>


										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Designation</label>
												<select id="editDesignation" name="DesignationId" class="form-control">
													<option value="">-- Select Designation --</option>
													@foreach (var designation in ViewBag.Designations)
													{
														<option value="@designation.Value">@designation.Text</option>
													}
												</select>
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Phone Number <span class="text-danger"> *</span></label>
												<input type="text" id="editPhoneNumber" name="PhoneNumber" class="form-control">
											</div>
										</div>
										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Address <span class="text-danger"> *</span></label>
												<input type="text" id="editAddress" name="Address" class="form-control">
											</div>
										</div>

										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Gender</label>
												<select class="form-control" id="editGender" name="Gender">

													<option>Male</option>
													<option>Female</option>
												</select>
											</div>
										</div>



										<div class="col-md-6">
											<div class="mb-3">
												<label class="form-label">Status</label>
												<select class="form-control" id="editStatus" name="Status">

													<option>Active</option>
													<option>Inactive</option>
												</select>
											</div>
										</div>

										<div class="col-md-12">
											<div class="mb-3">
												<label class="form-label">About <span class="text-danger"> *</span></label>
												<textarea id="editAboutEmployee" name="AboutEmployee" class="form-control" rows="3"></textarea>
											</div>
										</div>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-outline-light border me-2" data-bs-dismiss="modal">Cancel</button>
									<button type="submit" class="btn btn-primary" id="saveEdit">Save </button>
								</div>
							</div>

						</div>
					</form>
				</div>
			</div>
		</div>
		<!-- /Edit Employee -->
		<!-- /Edit Employee -->
		<!-- Add Employee Success -->
		<div class="modal fade" id="success_modal" role="dialog">
			<div class="modal-dialog modal-dialog-centered modal-sm">
				<div class="modal-content">
					<div class="modal-body">
						<div class="text-center p-3">
							<span class="avatar avatar-lg avatar-rounded bg-success mb-3"><i class="ti ti-check fs-24"></i></span>
							<h5 class="mb-2">Employee Added Successfully</h5>
							<p class="mb-3">
								Stephan Peralt has been added with Client ID : <span class="text-primary">#EMP - 0001</span>
							</p>
							<div>
								<div class="row g-2">
									<div class="col-6">
										<a href="employees.html" class="btn btn-dark w-100">Back to List</a>
									</div>
									<div class="col-6">
										<a href="employee-details.html" class="btn btn-primary w-100">Detail Page</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /Add Client Success -->
		<!-- Delete Modal -->
		<div class="modal fade" id="delete_modal">
			<div class="modal-dialog modal-dialog-centered modal-sm">
				<div class="modal-content">
					<div class="modal-body text-center">
						<span class="avatar avatar-xl bg-transparent-danger text-danger mb-3">
							<i class="ti ti-trash-x fs-36"></i>
						</span>
						<h4 class="mb-1">Confirm Delete</h4>
						<p class="mb-3">You want to delete all the marked items, this cant be undone once you delete.</p>
						<div class="d-flex justify-content-center">
							<a href="javascript:void(0);" class="btn btn-light me-3" data-bs-dismiss="modal">Cancel</a>
							<a href="employees-grid.html" class="btn btn-danger">Yes, Delete</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /Delete Modal -->

	</div>
	<!-- /Main Wrapper -->
	<!-- jQuery -->
	<script src="assets/js/jquery-3.7.1.min.js"></script>

	<!-- Bootstrap Core JS -->
	<script src="assets/js/bootstrap.bundle.min.js"></script>

	<!-- Feather Icon JS -->
	<script src="assets/js/feather.min.js"></script>

	<!-- Slimscroll JS -->
	<script src="assets/js/jquery.slimscroll.min.js"></script>

	<!-- Color Picker JS -->
	@* <script src="assets/plugins/@simonwep/pickr/pickr.es5.min.js"></script> *@

	<!-- Datatable JS -->
	<script src="assets/js/jquery.dataTables.min.js"></script>
	<script src="assets/js/dataTables.bootstrap5.min.js"></script>

	<!-- Daterangepikcer JS -->
	<script src="assets/js/moment.js"></script>
	<script src="assets/plugins/daterangepicker/daterangepicker.js"></script>
	<script src="assets/js/bootstrap-datetimepicker.min.js"></script>

	<!-- Select2 JS -->
	<script src="assets/plugins/select2/js/select2.min.js"></script>

	<!-- Chart JS -->
	<script src="assets/plugins/apexchart/apexcharts.min.js"></script>
	<script src="assets/plugins/apexchart/chart-data.js"></script>

	<!-- Bootstrap Tagsinput JS -->
	<script src="assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>

	<!-- Custom JS -->
	<script src="assets/js/theme-colorpicker.js"></script>
	<script src="assets/js/script.js"></script>
	<script>


		$(document).ready(function () {
			// Show Manager dropdown only if 'Employee' role is selected
			$("#roleDropdown").change(function () {
				var selectedRoleName = $("#roleDropdown option:selected").text();

				if (selectedRoleName === "Employee") {
					$("#managerContainer").show();
					$("#managerDropdown").prop("disabled", true);

					$("#departmentContainer").show();
					$("#departmentDropdown").prop("disabled", false).val("");

					$("#designationContainer").show();
					$("#designtionDropdown").prop("disabled", false).val("");


				} else if (selectedRoleName === "Admin") {
					$("#managerContainer").hide();
					$("#managerDropdown").prop("disabled", true).val("");
					$("#ReportingManagerName").val("");

					$("#departmentContainer").hide();
					$("#departmentDropdown").prop("disabled", true).val("");

					$("#designationContainer").hide();
					$("#designtionDropdown").prop("disabled", true).val("");

				}
				else {
					$("#managerContainer").hide();
					$("#managerDropdown").prop("disabled", true).val("");
					$("#ReportingManagerName").val("");

					// $("#departmentContainer").hide();
					// $("#departmentDropdown").prop("disabled", true).val("");
					// $("#ReportingManagerName").val("");
				}
			});

			// Filter and populate managers when department is selected
			$("#departmentDropdown").change(function () {
				var departmentId = $(this).val();
				var selectedRoleName = $("#roleDropdown option:selected").text();

				if (selectedRoleName === "Employee" && departmentId) {
					$("#managerDropdown").prop("disabled", false);

					// Filter managers by department
					$("#managerDropdown option").each(function () {
						var managerDepartmentId = $(this).data("department-id");
						if (managerDepartmentId == departmentId || managerDepartmentId === undefined) {
							$(this).show();
						} else {
							$(this).hide();
						}
					});

					// Reset the selected value
					$("#managerDropdown").val("");
					$("#ReportingManagerName").val(""); // Clear the hidden input
				} else {
					$("#managerDropdown").prop("disabled", true).val("");
					$("#ReportingManagerName").val(""); // Clear the hidden input
				}
			});

			// Update the hidden input with the selected manager's name
			$("#managerDropdown").change(function () {
				var selectedManagerName = $("#managerDropdown option:selected").text();
				console.log(selectedManagerName);
				$("#ReportingManagerName").val(selectedManagerName);
			});
			//end form script

			//start designation filter
			$('#designationFilter').change(function () {
				var selectedDesignation = $(this).val(); // Get the selected designation value

				// Loop through each employee card
				$('.employee-card').each(function () {
					var cardDesignation = $(this).data('designation'); // Get the designation of the card

					// Show or hide the card based on the selected designation
					if (selectedDesignation == 0 || cardDesignation == selectedDesignation) {
						$(this).show(); // Show the card if it matches the selected designation or if "Select Designation" is chosen
					} else {
						$(this).hide(); // Hide the card if it doesn't match
					}
				});
			});

			//start  with sorting

			// $('#optgrid').on('change', function () {
			// 	var sortBy = $(this).val();
			// 	$.ajax({
			// 		url: '/Employee/SortUserGrid',
			// 		type: 'GET',
			// 		data: { sortBy: sortBy },
			// 		success: function (data) {
			// 			if (data.error) {
			// 				alert(data.error);
			// 			} else {
			// 				Code to update the employee cards on the frontend
			// 				console.log(data);
			// 			}
			// 		},
			// 		error: function () {
			// 			alert("Error while sorting data.");
			// 		}
			// 	});
			// });
			// Sorting using the dropdown
			// $('#optgrid').change(function () {
			// 	var sortBy = $(this).val(); // Get the selected sorting option

			// 	$.ajax({
			// 		url: '/Employee/SortUserGr', // Adjust the controller name as needed
			// 		type: 'GET',
			// 		data: { sortBy: sortBy },
			// 		success: function (response) {
			// 			var employeeContainer = $('.row');
			// 			employeeContainer.empty(); // Clear existing employee cards

			// 			// Loop through the response data and create cards
			// 			$.each(response, function (index, user) {
			// 				console.log(response);
			// 				var cardHtml = `
			// 				<div class="col-xl-4 col-lg-4 col-md-6 mb-4 employee-card" data-designation="${user.DesignationId}">
			// 					<div class="card shadow-sm">
			// 						<div class="card-body">
			// 							<div class="d-flex justify-content-between align-items-start mb-2">
			// 								<div class="form-check form-check-md">
			// 									<input class="form-check-input" type="checkbox">
			// 								</div>
			// 								<div>
			// 									<a href="employee-details.html" class="avatar avatar-xl avatar-rounded online border p-1 border-primary rounded-circle">
			// 										<img src="/${user.ProfilePicture}" class="img-fluid h-auto w-auto" alt="Profile Picture">
			// 									</a>
			// 								</div>
			// 								<div class="dropdown">
			// 								</div>
			// 							</div>

			// 							<div class="text-center mb-3">
			// 								<h6 class="mb-1">${user.FirstName||'NA'} ${user.LastName}</h6>
			// 								<span class="mb-3">${user.DesignationName}</span>
			// 							</div>

			// 							<div class="row text-center">
			// 								<div class="col-4">
			// 									<div class="mb-3">
			// 										<span class="fs-12">Projects</span>
			// 										<h6 class="fw-medium">${user.TotalProjects}</h6>
			// 									</div>
			// 								</div>
			// 								<div class="col-4">
			// 									<div class="mb-3">
			// 										<span class="fs-12">Done</span>
			// 										<h6 class="fw-medium">${user.CompletedTasks}</h6>
			// 									</div>
			// 								</div>
			// 								<div class="col-4">
			// 									<div class="mb-3">
			// 										<span class="fs-12">Progress</span>
			// 										<h6 class="fw-medium">${user.InProgressTasks}</h6>
			// 									</div>
			// 								</div>
			// 							</div>

			// 							<p class="mb-2 text-center">Productivity: <span class="text-purple">${user.Productivity}%</span></p>
			// 							<div class="progress progress-xs mb-2">
			// 								<div class="progress-bar bg-purple" role="progressbar" style="width: ${user.Productivity}%"></div>
			// 							</div>
			// 						</div>
			// 					</div>
			// 				</div>`;

			// 				employeeContainer.append(cardHtml);
			// 			});
			// 		},
			// 		error: function () {
			// 			alert('Error retrieving data. Please try again.');
			// 		}
			// 	});
			// });
			$('#optgrid').change(function () {
				var sortBy = $(this).val(); // Get the selected sorting option

				$.ajax({
					url: '/Employee/SortUserGr', // Make sure this URL is correct
					type: 'GET',
					data: { sortBy: sortBy },
					success: function (response) {
						// Use a more specific container to prevent duplicates
						var employeeContainer = $('.employee-grid-container');
						employeeContainer.empty(); // Clear existing employee cards

						// Check if data is received
						if (response && response.length > 0) {
							// Loop through the response data and create cards
							$.each(response, function (index, user) {
								console.log(user); // Debugging: Check each user's data

								var cardHtml = `
									<div class="col-xl-4 col-lg-4 col-md-6 mb-4 employee-card" data-designation="${user.designationId || 'N/A'}">
										<div class="card shadow-sm">
											<div class="card-body">
												<div class="d-flex justify-content-between align-items-start mb-2">
													<div class="form-check form-check-md">
														<input class="form-check-input" type="checkbox">
													</div>
													<div>
														<a href="employee-details.html" class="avatar avatar-xl avatar-rounded online border p-1 border-primary rounded-circle">
															<img src="${window.location.origin}/${user.profilePicture || 'Content/uploads/default.png'}" class="img-fluid h-auto w-auto" alt="Profile Picture">
														</a>
													</div>
													<div class="dropdown">
													</div>
												</div>

												<div class="text-center mb-3">
													<h6 class="mb-1">${user.firstName || 'N/A'} ${user.lastName || 'N/A'}</h6>
													<span class="mb-3">${user.designationName || 'N/A'}</span>
												</div>

												<div class="row text-center">
													<div class="col-4">
														<div class="mb-3">
															<span class="fs-12">Projects</span>
															<h6 class="fw-medium">${user.totalProjects || 0}</h6>
														</div>
													</div>
													<div class="col-4">
														<div class="mb-3">
															<span class="fs-12">Done</span>
															<h6 class="fw-medium">${user.completedTasks || 0}</h6>
														</div>
													</div>
													<div class="col-4">
														<div class="mb-3">
															<span class="fs-12">Progress</span>
															<h6 class="fw-medium">${user.inProgressTasks || 0}</h6>
														</div>
													</div>
												</div>

												<p class="mb-2 text-center">Productivity: <span class="text-purple">${user.productivity || 0}%</span></p>
												<div class="progress progress-xs mb-2">
													<div class="progress-bar bg-purple" role="progressbar" style="width: ${user.productivity || 0}%"></div>
												</div>
											</div>
										</div>
									</div>`;

								employeeContainer.append(cardHtml);
							});
						} else {
							// If no data, show a message
							employeeContainer.append('<div class="col-12 text-center"><p>No data available.</p></div>');
						}
					},
					error: function () {
						alert('Error retrieving data. Please try again.');
					}
				});
			});
		});


	</script>


	<script src="~/lib/jquery/dist/jquery.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.3/xlsx.full.min.js"></script>

	<script src="~/js/emp.js"></script>

</body>

</html>